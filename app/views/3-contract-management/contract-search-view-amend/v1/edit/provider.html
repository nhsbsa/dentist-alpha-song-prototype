<!-- Use this page as the index for your project -->

<!-- ADDING CUSTOM CSS - Add your custom CSS or Sass in /app/assets/sass/main.scss -->

<!-- Extends the layout from /views/layout.html -->
{% extends 'default-layout.html' %}

<!-- Set the page title -->
{% block pageTitle %}
  Manage contracts
{% endblock %}

<!-- Breadcrumbs -->
{% block beforeContent %}
{% endblock %}

<!-- Back link -->
{% block outerContent %}
  <div class="nhsuk-back-link nhsuk-u-padding-top-3 nhsuk-u-margin-bottom-0">
    <a class="nhsuk-back-link__link" href="/3-contract-management/contract-search-view-amend/v1/contract-view">
      <svg class="nhsuk-icon nhsuk-icon__chevron-left" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" height="24" width="24">
        <path d="M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z"></path>
      </svg>
      Back</a>
  </div>
{% endblock %}

<!-- Content -->
{% block content %}
  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-two-thirds">

      <h1>
        Edit Provider Details
      </h1>

      <div class="nhsuk-form-group">
        <fieldset class="nhsuk-fieldset">
          <legend class="nhsuk-label nhsuk-u-font-weight-bold">
            Who is the primary site contact for this contract?
          </legend>
      
          <div class="nhsuk-radios">
            <div class="nhsuk-radios__item">
              <input class="nhsuk-radios__input" id="primary-contact-1" name="primary-contact" type="radio" value="provider" checked>
              <label class="nhsuk-label nhsuk-radios__label" for="primary-contact-1">
                Provider
              </label>
            </div>
      
            <div class="nhsuk-radios__item">
              <input class="nhsuk-radios__input" id="primary-contact-2" name="primary-contact" type="radio" value="practise manager">
              <label class="nhsuk-label nhsuk-radios__label" for="primary-contact-2">
                Practise Manager
              </label>
            </div>
          </div>
        </fieldset>
      </div>

      <div class="nhsuk-form-group">
        <label class="nhsuk-label nhsuk-u-font-weight-bold" for="provider-id">
          What is the Provider’s ID?
        </label>
        <input class="nhsuk-input" id="provider-id" name="provider-id" type="text" value="123456789" oninput="filterInputFunction(value)">
        <div id="filter-input" class="nhsuk-filter-input-box" style="display: none;">
          <a id="filter-input-row-1" class="nhsuk-link nhsuk-link--no-visited-state nhsuk-filter-input-link">123456789, Tom Holland</a>
          <a id="filter-input-row-2" class="nhsuk-link nhsuk-link--no-visited-state nhsuk-filter-input-link">123456784, Ella Purnell</a>
        </div>
      </div>
      <details id="provider-detail" class="nhsuk-details">
        <summary class="nhsuk-details__summary">
          <span class="nhsuk-details__summary-text">
            I don’t know the Provider’s ID
          </span>
        </summary>
        <div class="nhsuk-details__text">
          <p class="nhsuk-u-font-weight-bold nhsuk-u-margin-bottom-2">What is the provider’s name?</p>
          <div class="nhsuk-custom-search">
            <input class="nhsuk-search__input nhsuk-custom-search-input" id="contract-search" name="contract-search" type="search" placeholder="Search" autocomplete="off">
            <button id="provider-name-search" class="nhsuk-search__submit nhsuk-custom-search-icon" type="submit">
              <svg class="nhsuk-icon nhsuk-custom-search-icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                <path d="M19.71 18.29l-4.11-4.1a7 7 0 1 0-1.41 1.41l4.1 4.11a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 10a5 5 0 1 1 5 5 5 5 0 0 1-5-5z"></path>
              </svg>
              <span class="nhsuk-u-visually-hidden">Search</span>
            </button>
          </div>

          <table role="table" class="nhsuk-table-responsive">
            <caption class="nhsuk-u-visually-hidden">Provider table</caption>
            <thead role="rowgroup" class="nhsuk-table__head">
              <tr role="row">
                <th role="columnheader" class="" scope="col">
                  Name
                </th>
                <th role="columnheader" class="" scope="col">
                  Provider ID
                </th>
                <th role="columnheader" class="" scope="col">
                  GDC Number
                </th>
                <th role="columnheader" class="" scope="col">
                  Location
                </th>
                <th role="columnheader" class="" scope="col">
                  <span class="nhsuk-u-visually-hidden">Action</span>
                </th>
              </tr>
            </thead>
            <tbody class="nhsuk-table__body">
              <tr id="provider-name-results" role="row" class="nhsuk-table__row" style="display: none;">
                <td role="cell" class="nhsuk-table__cell">
                  <span class="nhsuk-table-responsive__heading">Name </span> Ella Purnell
                </td>
                <td role="cell" class="nhsuk-table__cell">
                  <span class="nhsuk-table-responsive__heading">Provider ID </span>123456784
                </td>
                <td role="cell" class="nhsuk-table__cell">
                  <span class="nhsuk-table-responsive__heading">GDC Number </span>5432457
                </td>
                <td role="cell" class="nhsuk-table__cell">
                  <span class="nhsuk-table-responsive__heading">Location </span>London
                </td>
                <td role="cell" class="nhsuk-table__cell">
                  <span class="nhsuk-table-responsive__heading">Action </span>
                  <a id="ella-select" href="#" class="nhsuk-link nhsuk-link--no-visited-state">Select</a> 
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </details>

      <p class="nhsuk-u-font-weight-bold nhsuk-u-margin-bottom-2">Primary Contact Name</p>
      <p id="details-name-1">Tom Holland</p>
      <p id="details-name-2" style="display: none;">Ella Purnell</p>

      <p class="nhsuk-u-font-weight-bold nhsuk-u-margin-bottom-2">Primary Contact Number</p>
      <p id="primary-contact-number-1">+44926545233</p>
      <p id="primary-contact-number-2" style="display: none;">+44986576233</p>

      <p class="nhsuk-u-font-weight-bold nhsuk-u-margin-bottom-2">Primary Contact Email</p>
      <p id="primary-contact-email-1">tomholland@abc.com</p>
      <p id="primary-contact-email-2" style="display: none;">ellapurnell@abc.com</p>


      <div class="nhsuk-button-group nhsuk-u-margin-top-6">
        <a id="update-provider" href="/3-contract-management/contract-search-view-amend/v1/contract-view" class="nhsuk-button nhsuk-u-margin-bottom-0" data-module="nhsuk-button" type="submit">
          Save
        </a>
        <a href="/3-contract-management/contract-search-view-amend/v1/contract-view" class="nhsuk-link nhsuk-link--no-visited-state">Back to edit</a>
      </div>

    </div>
  </div>
{% endblock %}

{% block pageScripts %}
  <script>
    const updateProviderBtn = document.getElementById('update-provider');
    const detailsName1 = document.getElementById('details-name-1');
    const detailsName2 = document.getElementById('details-name-2');
    const detailsPrimaryNumber1 = document.getElementById('primary-contact-number-1');
    const detailsPrimaryNumber2 = document.getElementById('primary-contact-number-2');
    const detailsPrimaryEmail1 = document.getElementById('primary-contact-email-1');
    const detailsPrimaryEmail2 = document.getElementById('primary-contact-email-2');
    const providerId = document.getElementById('provider-id');
    const filterInput = document.getElementById('filter-input');
    const filterInputR1 = document.getElementById('filter-input-row-1');
    const filterInputR2 = document.getElementById('filter-input-row-2');
    const providerNameSearch = document.getElementById('provider-name-search');
    const providerNameResults = document.getElementById('provider-name-results');
    const ellaSelect = document.getElementById('ella-select');
    const providerDetail = document.getElementById('provider-detail');
    let hasContractEdit = localStorage['hasContractEdit'];

    function filterInputFunction(value) {
      filterInput.style.display = 'flex';
      if (value === "123456784") {
        filterInputR1.style.display = 'none';
      } else {
        filterInputR1.style.display = 'block';
      }
    }

    filterInputR1.addEventListener('click', ()=>{
      filterInput.style.display = 'none';
      providerId.value = '123456789'
      detailsName1.style.display = 'block';
      detailsPrimaryNumber1.style.display = 'block';
      detailsPrimaryEmail1.style.display = 'block';
      detailsName2.style.display = 'none';
      detailsPrimaryNumber2.style.display = 'none';
      detailsPrimaryEmail2.style.display = 'none';
    });

    filterInputR2.addEventListener('click', ()=>{
      filterInput.style.display = 'none';
      providerId.value = '123456784'
      detailsName1.style.display = 'none';
      detailsPrimaryNumber1.style.display = 'none';
      detailsPrimaryEmail1.style.display = 'none';
      detailsName2.style.display = 'block';
      detailsPrimaryNumber2.style.display = 'block';
      detailsPrimaryEmail2.style.display = 'block';
    });

    providerNameSearch.addEventListener('click', ()=>{
      providerNameResults.style.display = 'table-row';
    });

    ellaSelect.addEventListener('click', ()=>{
      window.event.preventDefault();
      providerId.value = '123456784'
      detailsName1.style.display = 'none';
      detailsPrimaryNumber1.style.display = 'none';
      detailsPrimaryEmail1.style.display = 'none';
      detailsName2.style.display = 'block';
      detailsPrimaryNumber2.style.display = 'block';
      detailsPrimaryEmail2.style.display = 'block';
      providerDetail.removeAttribute('open')
    });

    updateProviderBtn.addEventListener('click', ()=>{
      localStorage['hasContractEdit'] = 'Yes';
    });
  </script>
{% endblock %}