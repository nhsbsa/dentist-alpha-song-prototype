<!-- Use this page as the index for your project -->

<!-- ADDING CUSTOM CSS - Add your custom CSS or Sass in /app/assets/sass/main.scss -->

<!-- Extends the layout from /views/layout.html -->
{% extends 'default-layout.html' %}

<!-- Set the page title -->
{% block pageTitle %}
  Create Contract
{% endblock %}

<!-- Breadcrumbs -->
{% block beforeContent %}
{% endblock %}

<!-- Back link -->
{% block outerContent %}
  <div class="nhsuk-back-link nhsuk-u-padding-top-3 nhsuk-u-margin-bottom-0">
    <a class="nhsuk-back-link__link" href="/3-contract-management/contract-create/v1/start-create-contract">
      <svg class="nhsuk-icon nhsuk-icon__chevron-left" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" height="24" width="24">
        <path d="M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z"></path>
      </svg>
      Back
    </a>
  </div>
{% endblock %}

<!-- Content -->
{% block content %}
  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-two-thirds">
      <div class="nhsuk-form-group">
        <legend class="nhsuk-fieldset__legend nhsuk-fieldset__legend--l">
          <h1 class="nhsuk-fieldset__heading" for="provider-id">
            What is the Provider’s ID?
          </h1>
        </legend>
        <input class="nhsuk-input" id="provider-id" name="provider-id" type="text" oninput="filterInputFunction(value)">
        <div id="filter-input" class="nhsuk-filter-input-box" style="display: none;">
          <a id="filter-input-row-1" class="nhsuk-link nhsuk-link--no-visited-state nhsuk-filter-input-link">123456789, Tom Holland</a>
          <a id="filter-input-row-2" class="nhsuk-link nhsuk-link--no-visited-state nhsuk-filter-input-link">123456784, Ella Purnell</a>
        </div>
      </div>
      <details id="provider-detail" class="nhsuk-details">
        <summary class="nhsuk-details__summary">
          <span class="nhsuk-details__summary-text">
            I don’t know the Provider's ID
          </span>
        </summary>
        <div class="nhsuk-details__text">
          <p class="nhsuk-u-font-weight-bold nhsuk-u-margin-bottom-2">What is the provider's name?</p>
          <div class="nhsuk-custom-search">
            <input class="nhsuk-search__input nhsuk-custom-search-input" id="contract-search" name="contract-search" type="search" placeholder="Search" autocomplete="off">
            <button id="provider-name-search" class="nhsuk-search__submit nhsuk-custom-search-icon" type="submit">
              <svg class="nhsuk-icon nhsuk-custom-search-icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                <path d="M19.71 18.29l-4.11-4.1a7 7 0 1 0-1.41 1.41l4.1 4.11a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 10a5 5 0 1 1 5 5 5 5 0 0 1-5-5z"></path>
              </svg>
              <span class="nhsuk-u-visually-hidden">Search</span>
            </button>
          </div>

          <table id="provider-name-results" role="table" class="nhsuk-table-responsive" style="display: none;">
            <caption class="nhsuk-u-visually-hidden">Providers table</caption>
            <thead role="rowgroup" class="nhsuk-table__head">
              <tr role="row">
                <th role="columnheader" class="" scope="col">
                  Name
                </th>
                <th role="columnheader" class="" scope="col">
                  Provider ID
                </th>
                <th role="columnheader" class="" scope="col">
                  GDC Number
                </th>
                <th role="columnheader" class="" scope="col">
                  Location
                </th>
                <th role="columnheader" class="" scope="col">
                  <span class="nhsuk-u-visually-hidden">Action</span>
                </th>
              </tr>
            </thead>
            <tbody class="nhsuk-table__body">
              <tr role="row" class="nhsuk-table__row">
                <td role="cell" class="nhsuk-table__cell">
                  <span class="nhsuk-table-responsive__heading">Name </span> Ella Purnell
                </td>
                <td role="cell" class="nhsuk-table__cell">
                  <span class="nhsuk-table-responsive__heading">Provider ID </span>123456784
                </td>
                <td role="cell" class="nhsuk-table__cell">
                  <span class="nhsuk-table-responsive__heading">GDC Number </span>5432457
                </td>
                <td role="cell" class="nhsuk-table__cell">
                  <span class="nhsuk-table-responsive__heading">Location </span>London
                </td>
                <td role="cell" class="nhsuk-table__cell">
                  <span class="nhsuk-table-responsive__heading">Action </span>
                  <a id="usertable-select" href="#" class="nhsuk-link nhsuk-link--no-visited-state">Select</a> 
                </td>
              </tr>
            </tbody>
          </table>
          <br />
          <a href="#" class="nhsuk-link nhsuk-link--no-visited-state">Create a new provider (opens in a new tab)</a>
        </div>
      </details>

      <div id="search-results" style="display: none;">
        <dl class="nhsuk-summary-list">
          <div class="nhsuk-summary-list__row">
            <dt class="nhsuk-summary-list__key">
              Primary contact name
            </dt>
            <dd class="nhsuk-summary-list__value">
              Tom Holland
            </dd>
          </div>
        
          <div class="nhsuk-summary-list__row">
            <dt class="nhsuk-summary-list__key">
              Primary contract number
            </dt>
            <dd class="nhsuk-summary-list__value">
              +44986576233
            </dd>
          </div>
        
          <div class="nhsuk-summary-list__row">
            <dt class="nhsuk-summary-list__key">
              Primary contact email
            </dt>
            <dd class="nhsuk-summary-list__value">
              johndoe@abc.com
            </dd>
          </div>
        </dl>
      </div>

      <div id="search-results-2" style="display: none;">
        <dl class="nhsuk-summary-list">
          <div class="nhsuk-summary-list__row">
            <dt class="nhsuk-summary-list__key">
              Primary contact name
            </dt>
            <dd class="nhsuk-summary-list__value">
              Ella Purnell
            </dd>
          </div>
        
          <div class="nhsuk-summary-list__row">
            <dt class="nhsuk-summary-list__key">
              Primary contract number
            </dt>
            <dd class="nhsuk-summary-list__value">
              +44986576233
            </dd>
          </div>
        
          <div class="nhsuk-summary-list__row">
            <dt class="nhsuk-summary-list__key">
              Primary contact email
            </dt>
            <dd class="nhsuk-summary-list__value">
              johndoe@abc.com
            </dd>
          </div>
        </dl>
      </div>

      <div class="nhsuk-button-group nhsuk-u-margin-top-6">
        <a id="provider-next" href="/3-contract-management/contract-create/v1/general/new-contract" class="nhsuk-button nhsuk-u-margin-bottom-0" data-module="nhsuk-button" type="submit" disabled>
          Next
        </a>
        <a href="/3-contract-management/contract-create/v1/start-create-contract" class="nhsuk-button nhsuk-button--secondary nhsuk-u-margin-bottom-0" data-module="nhsuk-button" type="submit">
          Save and exit
        </a>
        <a href="/3-contract-management/contract-create/v1/start-create-contract" class="nhsuk-link nhsuk-link--no-visited-state">Cancel</a>
      </div>

    </div>
  </div>
{% endblock %}

{% block pageScripts %}
  <script>
    const providerId = document.getElementById('provider-id');
    const filterInput = document.getElementById('filter-input');
    const filterInputR1 = document.getElementById('filter-input-row-1');
    const filterInputR2 = document.getElementById('filter-input-row-2');
    const providerNameSearch = document.getElementById('provider-name-search');
    const providerNameResults = document.getElementById('provider-name-results');
    const usertableSelect = document.getElementById('usertable-select');
    const providerDetail = document.getElementById('provider-detail');
    const searchResults = document.getElementById('search-results');
    const searchResults2 = document.getElementById('search-results-2');
    const providerNext = document.getElementById('provider-next');

    function filterInputFunction(value) {
      filterInput.style.display = 'flex';
      if (value === "123456784") {
        filterInputR1.style.display = 'none';
      } else {
        filterInputR1.style.display = 'block';
      }
    }

    filterInputR1.addEventListener('click', ()=>{
      filterInput.style.display = 'none';
      providerId.value = '123456789';
      providerNext.removeAttribute("disabled");
      searchResults.style.display = 'block';
      searchResults2.style.display = 'none';
    });

    filterInputR2.addEventListener('click', ()=>{
      filterInput.style.display = 'none';
      providerId.value = '123456784';
      providerNext.removeAttribute("disabled");
      searchResults.style.display = 'none';
      searchResults2.style.display = 'block';
    });

    providerNameSearch.addEventListener('click', ()=>{
      providerNameResults.style.display = 'table-row';
    });

    usertableSelect.addEventListener('click', ()=>{
      window.event.preventDefault();
      providerId.value = '123456784'
      providerDetail.removeAttribute("open");
      searchResults.style.display = 'none'; 
      searchResults2.style.display = 'block';
      providerNext.removeAttribute("disabled");
    });

  </script>
{% endblock %}