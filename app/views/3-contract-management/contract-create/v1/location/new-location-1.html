<!-- Use this page as the index for your project -->

<!-- ADDING CUSTOM CSS - Add your custom CSS or Sass in /app/assets/sass/main.scss -->

<!-- Extends the layout from /views/layout.html -->
{% extends 'default-layout.html' %}

<!-- Set the page title -->
{% block pageTitle %}
  Create Contract
{% endblock %}

<!-- Breadcrumbs -->
{% block beforeContent %}
{% endblock %}

<!-- Back link -->
{% block outerContent %}
  <div class="nhsuk-back-link nhsuk-u-padding-top-3 nhsuk-u-margin-bottom-0">
    <a class="nhsuk-back-link__link" href="/3-contract-management/contract-create/v1/start-create-contract">
      <svg class="nhsuk-icon nhsuk-icon__chevron-left" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" height="24" width="24">
        <path d="M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z"></path>
      </svg>
      Back
    </a>
  </div>
{% endblock %}

<!-- Content -->
{% block content %}
  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-two-thirds">
      
      <h1>
        <span class="nhsuk-caption-l">Add a treatment location</span>
        When does the treatment location start?
      </h1>

      <div id="q5" class="nhsuk-form-group" >
        <fieldset class="nhsuk-fieldset" role="group">
          <div class="nhsuk-hint" id="contact-hint">
            For example, 15 6 2025
          </div>
          <div class="nhsuk-date-input" id="start-date">
            <div class="nhsuk-date-input__item">
              <div class="nhsuk-form-group">
                <label class="nhsuk-label nhsuk-date-input__label" for="start-date-day">
                  Day
                </label>
                <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-2" id="start-date-day" name="start-date-day" type="text" pattern="[0-9]*" inputmode="numeric">
              </div>
            </div>
            <div class="nhsuk-date-input__item">
              <div class="nhsuk-form-group">
                <label class="nhsuk-label nhsuk-date-input__label" for="start-date-month">
                  Month
                </label>
                <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-2" id="start-date-month" name="start-date-month" type="text" pattern="[0-9]*" inputmode="numeric">
              </div>
            </div>
            <div class="nhsuk-date-input__item">
              <div class="nhsuk-form-group">
                <label class="nhsuk-label nhsuk-date-input__label" for="start-date-year">
                  Year
                </label>
                <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-4" id="start-date-year" name="start-date-year" type="text" pattern="[0-9]*" inputmode="numeric">
              </div>
            </div>
          </div>
        </fieldset>
      </div>
      <br>

      <!-- QUESTION 6 -->
      <div id="q5" class="nhsuk-form-group" >
        <fieldset class="nhsuk-fieldset" role="group">
          <legend class="nhsuk-fieldset__legend nhsuk-fieldset__legend--m">
            <h2 class="nhsuk-fieldset__heading">
              When does the treatment location end? (Optional)
            </h2>
          </legend>
          <div class="nhsuk-hint" id="contact-hint">
            For example, 15 6 2028
          </div>
          <div class="nhsuk-date-input" id="start-date">
            <div class="nhsuk-date-input__item">
              <div class="nhsuk-form-group">
                <label class="nhsuk-label nhsuk-date-input__label" for="start-date-day">
                  Day
                </label>
                <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-2" id="start-date-day" name="start-date-day" type="text" pattern="[0-9]*" inputmode="numeric">
              </div>
            </div>
            <div class="nhsuk-date-input__item">
              <div class="nhsuk-form-group">
                <label class="nhsuk-label nhsuk-date-input__label" for="start-date-month">
                  Month
                </label>
                <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-2" id="start-date-month" name="start-date-month" type="text" pattern="[0-9]*" inputmode="numeric">
              </div>
            </div>
            <div class="nhsuk-date-input__item">
              <div class="nhsuk-form-group">
                <label class="nhsuk-label nhsuk-date-input__label" for="start-date-year">
                  Year
                </label>
                <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-4" id="start-date-year" name="start-date-year" type="text" pattern="[0-9]*" inputmode="numeric">
              </div>
            </div>
          </div>
        </fieldset>
      </div>
      <br>
      

      <div class="nhsuk-button-group nhsuk-u-margin-top-6">
        <a id="location-next" href="/3-contract-management/contract-create/v1/location/check-answers" class="nhsuk-button nhsuk-u-margin-bottom-0" data-module="nhsuk-button" type="submit">
          Continue
        </a>
        <a id="add-another" href="#" class="nhsuk-button nhsuk-button--secondary nhsuk-u-margin-bottom-0" data-module="nhsuk-button" type="submit">
          Save and exit
        </a>
        <a href="/3-contract-management/contract-create/v1/start-create-contract" class="nhsuk-link nhsuk-link--no-visited-state">Cancel entry</a>
      </div>

    </div>
  </div>
{% endblock %}

{% block pageScripts %}
  <script>
    const filterInput = document.getElementById('filter-input');
    const locationId = document.getElementById('location-id');
    const resultsContainer = document.getElementById('results-container');
    const filterInputR1 = document.getElementById('filter-input-row-1');
    const filterInputR2 = document.getElementById('filter-input-row-2');
    const result1 = document.getElementById('result-1');
    const result2 = document.getElementById('result-2');
    const locationNameSearch = document.getElementById('location-name-search');
    const locationNameResults = document.getElementById('location-name-results');
    const locationTableSelect = document.getElementById('location-table-select');
    const locationDetail = document.getElementById('location-detail');
    const contactContainer = document.getElementById('contact-container');
    const number = document.getElementById('number');
    const locationNext = document.getElementById('location-next');
    const addAnother = document.getElementById('add-another');

    function filterInputFunction(value) {
      filterInput.style.display = 'flex';
      if (value === "123456784") {
        filterInputR1.style.display = 'none';
      } else {
        filterInputR1.style.display = 'block';
      }
    }

    filterInputR1.addEventListener('click', ()=>{
      filterInput.style.display = 'none';
      locationId.value = '123456789';
      resultsContainer.style.display = 'block';
      result1.style.display = 'block';
      result2.style.display = 'none';
      contactContainer.style.display = 'block';
    });

    filterInputR2.addEventListener('click', ()=>{
      filterInput.style.display = 'none';
      locationId.value = '123456784';
      resultsContainer.style.display = 'block';
      result1.style.display = 'none';
      result2.style.display = 'block';
      contactContainer.style.display = 'block';
    });

    locationNameSearch.addEventListener('click', ()=>{
      locationNameResults.style.display = 'table-row';
    });

    locationTableSelect.addEventListener('click', ()=>{
      window.event.preventDefault();
      locationId.value = '123456784'
      locationDetail.removeAttribute("open");
      resultsContainer.style.display = 'block';
      result1.style.display = 'none';
      result2.style.display = 'block';
      contactContainer.style.display = 'block';
    });

    number.addEventListener('change', ()=>{
      locationNext.removeAttribute("disabled");
      addAnother.removeAttribute("disabled");
    });
  </script>
{% endblock %}