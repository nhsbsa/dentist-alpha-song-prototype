<!-- Use this page as the index for your project -->

<!-- ADDING CUSTOM CSS - Add your custom CSS or Sass in /app/assets/sass/main.scss -->

<!-- Extends the layout from /views/layout.html -->
{% extends 'default-layout.html' %}

<!-- Set the page title -->
{% block pageTitle %}
  Create Contract
{% endblock %}

<!-- Breadcrumbs -->
{% block beforeContent %}
{% endblock %}

<!-- Back link -->
{% block outerContent %}
  <div class="nhsuk-back-link nhsuk-u-padding-top-3 nhsuk-u-margin-bottom-0">
    <a id="back" class="nhsuk-back-link__link" href="/3-contract-management/contract-create/v1-provider/create/clinicians/new-clinician">
      <svg class="nhsuk-icon nhsuk-icon__chevron-left" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" height="24" width="24">
        <path d="M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z"></path>
      </svg>
      Back
    </a>
  </div>
{% endblock %}

<!-- Content -->
{% block content %}
  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-two-thirds">
      <h1>Add a Clinician</h1>

      <p class="nhsuk-u-font-weight-bold nhsuk-u-margin-bottom-0">Clinician’s name</p>
      <p>Ella Purnell</p>

      <p class="nhsuk-u-font-weight-bold nhsuk-u-margin-bottom-0">GDC number</p>
      <p>6497356</p>

      <p class="nhsuk-u-font-weight-bold nhsuk-u-margin-bottom-0">Role type</p>
      <p>DCP</p>

      <div class="nhsuk-form-group">
        <fieldset class="nhsuk-fieldset" role="group">
          <legend class="nhsuk-fieldset__legend nhsuk-label--l">
            <span class="nhsuk-fieldset__heading">
              What is their start date on the contract?
            </span>
          </legend>
      
          <div class="nhsuk-date-input" id="start">
            <div class="nhsuk-date-input__item">
              <div class="nhsuk-form-group">
                <label class="nhsuk-label nhsuk-date-input__label" for="start-day">
                  Day
                </label>
                <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-2" id="start-day" name="start-day" type="text" pattern="[0-9]*" inputmode="numeric">
              </div>
            </div>
            <div class="nhsuk-date-input__item">
              <div class="nhsuk-form-group">
                <label class="nhsuk-label nhsuk-date-input__label" for="start-month">
                  Month
                </label>
                <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-2" id="start-month" name="start-month" type="text" pattern="[0-9]*" inputmode="numeric">
              </div>
            </div>
            <div class="nhsuk-date-input__item">
              <div class="nhsuk-form-group">
                <label class="nhsuk-label nhsuk-date-input__label" for="start-year">
                  Year
                </label>
                <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-4" id="start-year" name="start-year" type="text" pattern="[0-9]*" inputmode="numeric">
              </div>
            </div>
          </div>
        </fieldset>
      </div>

      <div class="nhsuk-form-group">
        <fieldset class="nhsuk-fieldset" role="group">
          <legend class="nhsuk-fieldset__legend nhsuk-label--l">
            <span class="nhsuk-fieldset__heading">
              What is their end date on the contract? (Optional)
            </span>
          </legend>
      
          <div class="nhsuk-date-input" id="end">
            <div class="nhsuk-date-input__item">
              <div class="nhsuk-form-group">
                <label class="nhsuk-label nhsuk-date-input__label" for="end-day">
                  Day
                </label>
                <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-2" id="end-day" name="end-day" type="text" pattern="[0-9]*" inputmode="numeric">
              </div>
            </div>
            <div class="nhsuk-date-input__item">
              <div class="nhsuk-form-group">
                <label class="nhsuk-label nhsuk-date-input__label" for="end-month">
                  Month
                </label>
                <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-2" id="end-month" name="end-month" type="text" pattern="[0-9]*" inputmode="numeric">
              </div>
            </div>
            <div class="nhsuk-date-input__item">
              <div class="nhsuk-form-group">
                <label class="nhsuk-label nhsuk-date-input__label" for="end-year">
                  Year
                </label>
                <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-4" id="end-year" name="end-year" type="text" pattern="[0-9]*" inputmode="numeric">
              </div>
            </div>
          </div>
        </fieldset>
      </div>

      <div id="q3" class="nhsuk-form-group" style="display: none;">
        <fieldset class="nhsuk-fieldset">
          <legend class="nhsuk-fieldset__legend nhsuk-fieldset__legend--l">
            <span class="nhsuk-fieldset__heading">
              How will the Clinician’s activity be measured for FY2024/25?
            </span>
          </legend>
      
          <div class="nhsuk-radios">
            <div class="nhsuk-radios__item">
              <input class="nhsuk-radios__input" id="q3-option-1" name="activity-measured" type="radio" value="uda">
              <label class="nhsuk-label nhsuk-radios__label" for="q3-option-1">
                UDA
              </label>
            </div>
      
            <div class="nhsuk-radios__item">
              <input class="nhsuk-radios__input" id="q3-option-2" name="activity-measured" type="radio" value="option 2">
              <label class="nhsuk-label nhsuk-radios__label" for="q3-option-2">
                Option 2
              </label>
            </div>

            <div class="nhsuk-radios__item">
              <input class="nhsuk-radios__input" id="q3-option-3" name="activity-measured" type="radio" value="option 3">
              <label class="nhsuk-label nhsuk-radios__label" for="q3-option-3">
                Option 3
              </label>
            </div>
          </div>
        </fieldset>
      </div>

      <div id="q4" class="nhsuk-form-group" style="display: none;">
        <label class="nhsuk-label nhsuk-label--l" for="clinician-activity">
          What is the Clinician’s activity target for FY2024/25?
        </label>
        <div class="nhsuk-input__wrapper">
          <input class="nhsuk-input nhsuk-input--width-5" id="clinician-activity" name="clinician-activity" type="text">
          <div class="nhsuk-input__suffix" aria-hidden="true">UDAs</div>
        </div>
      </div>
      
      <div id="q5" class="nhsuk-form-group" style="display: none;">
        <fieldset class="nhsuk-fieldset">
          <legend class="nhsuk-fieldset__legend nhsuk-fieldset__legend--l">
            <span class="nhsuk-fieldset__heading">
              Is the Clinician currently opted into the pension scheme?
            </span>
          </legend>
      
          <div class="nhsuk-radios">
            <div class="nhsuk-radios__item">
              <input class="nhsuk-radios__input" id="q5-option-1" name="pension-scheme" type="radio" value="yes" checked disabled>
              <label class="nhsuk-label nhsuk-radios__label" for="q5-option-1">
                Yes
              </label>
            </div>
      
            <div class="nhsuk-radios__item">
              <input class="nhsuk-radios__input" id="q5-option-2" name="pension-scheme" type="radio" value="no" disabled>
              <label class="nhsuk-label nhsuk-radios__label" for="q5-option-2">
                No
              </label>
            </div>
          </div>
        </fieldset>
      </div>

      <div id="q6" style="display: none;">
        <h2>NPE & NPEE estimations for FY2024/25</h2>

        <!-- CARD 1 -->
        <div id="npe-1" class="nhsuk-npe-card">
          <h3 class="nhsuk-u-margin-bottom-0">NPE 1</h3>
          <dl class="nhsuk-summary-list nhsuk-summary-list--no-border nhsuk-u-margin-bottom-3">
            <div class="nhsuk-summary-list__row">
              <dt class="nhsuk-summary-list__key vertical-align">
                Start Date
              </dt>
              <dd class="nhsuk-summary-list__value">
                <div class="nhsuk-form-group">
                  <fieldset class="nhsuk-fieldset" role="group">
                    <legend class="nhsuk-u-visually-hidden" for="npe-npee-start-date">
                      NPE/NPEE Start Date
                    </legend>
                    <div class="nhsuk-date-input" id="npe-npee-start-date">
                      <div class="nhsuk-date-input__item">
                        <div class="nhsuk-form-group">
                          <label class="nhsuk-label nhsuk-date-input__label" for="start-day">
                            Day
                          </label>
                          <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-2" id="start-day" name="start-day" type="text" pattern="[0-9]*" inputmode="numeric">
                        </div>
                      </div>
                      <div class="nhsuk-date-input__item">
                        <div class="nhsuk-form-group">
                          <label class="nhsuk-label nhsuk-date-input__label" for="start-month">
                            Month
                          </label>
                          <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-2" id="start-month" name="start-month" type="text" pattern="[0-9]*" inputmode="numeric">
                        </div>
                      </div>
                      <div class="nhsuk-date-input__item">
                        <div class="nhsuk-form-group">
                          <label class="nhsuk-label nhsuk-date-input__label" for="start-year">
                            Year
                          </label>
                          <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-4" id="start-year" name="start-year" type="text" pattern="[0-9]*" inputmode="numeric">
                        </div>
                      </div>
                    </div>
                  </fieldset>
                </div>
              </dd>
            </div>
            <div class="nhsuk-summary-list__row">
              <dt class="nhsuk-summary-list__key vertical-align">
                End Date
              </dt>
              <dd class="nhsuk-summary-list__value">
                <div class="nhsuk-form-group">
                  <fieldset class="nhsuk-fieldset" role="group">
                    <legend class="nhsuk-u-visually-hidden" for="npe-npee-end-date">
                      NPE/NPEE end Date
                    </legend>
                    <div class="nhsuk-date-input" id="npe-npee-end-date">
                      <div class="nhsuk-date-input__item">
                        <div class="nhsuk-form-group">
                          <label class="nhsuk-label nhsuk-date-input__label" for="end-day">
                            Day
                          </label>
                          <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-2" id="end-day" name="end-day" type="text" pattern="[0-9]*" inputmode="numeric">
                        </div>
                      </div>
                      <div class="nhsuk-date-input__item">
                        <div class="nhsuk-form-group">
                          <label class="nhsuk-label nhsuk-date-input__label" for="end-month">
                            Month
                          </label>
                          <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-2" id="end-month" name="end-month" type="text" pattern="[0-9]*" inputmode="numeric">
                        </div>
                      </div>
                      <div class="nhsuk-date-input__item">
                        <div class="nhsuk-form-group">
                          <label class="nhsuk-label nhsuk-date-input__label" for="end-year">
                            Year
                          </label>
                          <input class="nhsuk-input nhsuk-date-input__input nhsuk-input--width-4" id="end-year" name="end-year" type="text" pattern="[0-9]*" inputmode="numeric">
                        </div>
                      </div>
                    </div>
                  </fieldset>
                </div>
              </dd>
            </div>
            <div class="nhsuk-summary-list__row">
              <dt class="nhsuk-summary-list__key vertical-align">
                Employment Type
              </dt>
              <dd class="nhsuk-summary-list__value">
                <div class="nhsuk-form-group">
                  <label class="nhsuk-u-visually-hidden" for="employment-type">
                    Employment Type
                  </label>
                  <select class="nhsuk-select" id="employment-type" name="employment-type">
                    <option value="1" selected>Select</option>
                    <option value="2">Option 1</option>
                    <option value="3">Option 2</option>
                  </select>
                </div>
              </dd>
          
            </div>
            <div class="nhsuk-summary-list__row">
              <dt class="nhsuk-summary-list__key vertical-align">
                NPE value
              </dt>
              <dd class="nhsuk-summary-list__value">
                <div class="nhsuk-input__wrapper">
                  <div class="nhsuk-input__prefix" aria-hidden="true">£</div>
                  <input class="nhsuk-input nhsuk-input--width-5" id="value" name="value" type="text">
                </div>
              </dd>
            </div>
          </dl>
        </div>
        <br />
        <a id="add-npe-npee-btn" href="#" class="nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-4" data-module="nhsuk-button" type="submit">
          Add another estimation
        </a>
      </div>
      
      <div class="nhsuk-button-group nhsuk-u-margin-top-6">
        <a id="add-clinician" href="/3-contract-management/contract-create/v1-provider/create/clinicians/summary" class="nhsuk-button nhsuk-u-margin-bottom-0" data-module="nhsuk-button" type="submit" disabled>
          Save
        </a>
        <a id="add-another" href="/3-contract-management/contract-create/v1-provider/create/clinicians/new-clinician" class="nhsuk-button nhsuk-button--secondary nhsuk-u-margin-bottom-0" data-module="nhsuk-button" type="submit" disabled>
          Save and add another
        </a>
        <a href="/3-contract-management/contract-create/v1-provider/create/start-create-contract" class="nhsuk-link nhsuk-link--no-visited-state">Cancel</a>
      </div>

    </div>
  </div>
{% endblock %}

{% block pageScripts %}
  <script>
    const startYear = document.getElementById('start-year');
    const q3 = document.getElementById('q3');
    const q3Option1 = document.getElementById('q3-option-1');
    const q4 = document.getElementById('q4');
    const clinicianActivity = document.getElementById('clinician-activity');
    const q5 = document.getElementById('q5');
    const q5Option1 = document.getElementById('q5-option-1');
    const q5Option2 = document.getElementById('q5-option-2');
    const q6 = document.getElementById('q6');
    const value = document.getElementById('value');
    const addClinician = document.getElementById('add-clinician');
    const back = document.getElementById('back');
    const addAnother = document.getElementById('add-another');

    startYear.addEventListener('change', ()=>{
      q3.style.display = 'block';
    });

    q3Option1.addEventListener('click', ()=>{
      q4.style.display = 'block';
    });

    clinicianActivity.addEventListener('change', ()=>{
      q5.style.display = 'block';
      q6.style.display = 'block';
      q6.style.display = 'block';
    });

    q5Option1.addEventListener('click', ()=>{
      q6.style.display = 'block';
    });

    q5Option2.addEventListener('click', ()=>{
      q6.style.display = 'block';
    });

    value.addEventListener('change', ()=>{
      addClinician.removeAttribute("disabled");
      addAnother.removeAttribute("disabled");
    });

    // POPUP FUNCTION
    function windowPopUp() {
      if (confirm("Are you sure you want to leave this page?\n\nDetails on this page may be lost if you go back to previous page")) {
        window.location.href = '/provider/contract-management/create/clinicians/new-clinician';
      }
    }

    back.addEventListener('click', ()=>{
      // PREVENT PAGE CHANGE
      window.event.preventDefault();
      // DISPLAY POPUP
      windowPopUp();
    });

    addAnother.addEventListener('click', ()=>{
      localStorage['hasSavedClinician'] = 'Yes';
    });
  </script>
{% endblock %}