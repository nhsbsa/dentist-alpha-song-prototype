<!-- Use this page as the index for your project -->

<!-- ADDING CUSTOM CSS - Add your custom CSS or Sass in /app/assets/sass/main.scss -->

<!-- Extends the layout from /views/layout.html -->
{% extends 'default-layout.html' %}

<!-- Set the page title -->
{% block pageTitle %}
  Manage contracts
{% endblock %}

<!-- Breadcrumbs -->
{% block beforeContent %}
{% endblock %}

<!-- Back link -->
{% block outerContent %}
<div class="nhsuk-back-link nhsuk-u-padding-top-3 nhsuk-u-margin-bottom-0">
  <a class="nhsuk-back-link__link" href="/6-pension-management/submit-ARR-clinician/v1/arr-list">
    <svg class="nhsuk-icon nhsuk-icon__chevron-left" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" height="24" width="24">
      <path d="M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z"></path>
    </svg>
    Back</a>
</div>
{% endblock %}

<!-- Content -->
{% block content %}
  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-two-thirds">
      <!-- TITLE -->
      <h1>
        ARR for Ella Purnell
        <span class="nhsuk-caption-xl nhsuk-caption--bottom">Contract name, 99017500001</span>
      </h1>

      <h2>Financial year 2023/24</h2>

      <!-- SUMMARY TABLE -->
      <dl class="nhsuk-summary-list">
        <div class="nhsuk-summary-list__row">
          <dt class="nhsuk-summary-list__key">
            Clinician ID
          </dt>
          <dd class="nhsuk-summary-list__value">
            527386
          </dd>
        </div>
        <div class="nhsuk-summary-list__row">
          <dt class="nhsuk-summary-list__key">
            Name
          </dt>
          <dd class="nhsuk-summary-list__value">
            Ella Purnell
          </dd>
        </div>
        <div class="nhsuk-summary-list__row">
          <dt class="nhsuk-summary-list__key">
            ARR start date
          </dt>
          <dd class="nhsuk-summary-list__value">
            01/04/2023
          </dd>
        </div>
        <div class="nhsuk-summary-list__row">
          <dt class="nhsuk-summary-list__key">
            ARR end date
          </dt>
          <dd class="nhsuk-summary-list__value">
            <p>30/06/2024</p>
          </dd>
        </div>
        <div class="nhsuk-summary-list__row">
          <dt class="nhsuk-summary-list__key">
            Pay during this ARR period
          </dt>
          <dd class="nhsuk-summary-list__value">
            <p>£ 50,000</p>
          </dd>
        </div>
      </dl>
      <!-- ARR ACTION -->
      <div class="nhsuk-form-group">
        <fieldset class="nhsuk-fieldset">
          <legend class="nhsuk-fieldset__legend nhsuk-u-font-weight-bold">
            Is your pay between dates 01/04/2024 and 30/06/2024 accurately reflected here?
          </legend>
          <div class="nhsuk-radios nhsuk-radios--inline">
            <div class="nhsuk-radios__item">
              <input class="nhsuk-radios__input" id="arr-correct-yes" name="arr-correct" type="radio" value="yes">
              <label class="nhsuk-label nhsuk-radios__label" for="arr-correct-yes">
                Yes
              </label>
            </div>
      
            <div class="nhsuk-radios__item">
              <input class="nhsuk-radios__input" id="arr-correct-no" name="arr-correct" type="radio" value="no">
              <label class="nhsuk-label nhsuk-radios__label" for="arr-correct-no">
                No
              </label>
            </div>
          </div>
        </fieldset>
      </div>

      <div id="arr-proposed-q" class="nhsuk-form-group" style="display: none;">
        <label class="nhsuk-label nhsuk-u-font-weight-bold" for="arr-proposed">
          Proposed NPEE
        </label>
        <div class="nhsuk-input__wrapper">
          <div class="nhsuk-input__prefix" aria-hidden="true">£</div>
          <input class="nhsuk-input nhsuk-input--width-5" id="arr-proposed" name="arr-proposed" type="text" oninput="proposedInputHasValue()">
        </div>
      </div>

      <!-- ACTION BUTTONS -->
      <div class="nhsuk-button-group nhsuk-u-margin-top-5">
        <button id="arr-accept-btn" class="nhsuk-button nhsuk-u-margin-bottom-0" data-module="nhsuk-button" type="submit" disabled>
          Submit
        </button>
        <a href="#" class="nhsuk-link nhsuk-link--no-visited-state">
          Cancel
        </a>
      </div>
    </div>
  </div>
{% endblock %}

{% block pageScripts %}
  <script>
    const arrCorrectYes = document.getElementById('arr-correct-yes');
    const arrCorrectNo = document.getElementById('arr-correct-no');
    const proposedQuestion = document.getElementById('arr-proposed-q');
    const proposedInput = document.getElementById('arr-proposed');
    const submitBtn = document.getElementById('arr-accept-btn');
    let hasNpeResponse = localStorage['hasNpeResponse'];

    arrCorrectYes.addEventListener('click', ()=>{
      if(arrCorrectYes.checked) {
        proposedQuestion.style.display = 'none';
        submitBtn.disabled = false;
      }
    });

    arrCorrectNo.addEventListener('click', ()=>{
      if(arrCorrectNo.checked) {
        proposedQuestion.style.display = 'block';
        submitBtn.disabled = true;
      }
    });

    submitBtn.addEventListener('click', ()=>{
      localStorage['hasNpeResponse'] = 'Yes';
      window.location.href = '#';
    });

    function proposedInputHasValue() {
      if (proposedInput.value) {
        submitBtn.disabled = false;
      } else {
        submitBtn.disabled = true;
      }
    };
  </script>
{% endblock %}